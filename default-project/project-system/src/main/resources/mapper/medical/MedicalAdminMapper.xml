<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.project.system.mapper.medical.MedicalAdminMapper">
    
    <resultMap type="MedicalAdmin" id="MedicalAdminResult">
        <id     property="id"            column="id"            />
        <result property="name"          column="name"          />
        <result property="pwd"           column="pwd"           />
        <result property="uid"           column="uid"           />
        <result property="isRoot"        column="is_root"       />
        <result property="createTimeStamp" column="create_time" />
    </resultMap>

    <sql id="selectAdminVo">
        select id, name, pwd, uid, is_root, create_time
        from project_admin
    </sql>

    <select id="selectAdminList" parameterType="MedicalAdmin" resultMap="MedicalAdminResult">
        <include refid="selectAdminVo"/>
        <where>  
            <if test="name != null and name != ''"> and name like concat('%', #{name}, '%')</if>
            <if test="isRoot != null"> and is_root = #{isRoot}</if>
        </where>
        order by create_time desc
    </select>
    
    <select id="selectAdminById" parameterType="Long" resultMap="MedicalAdminResult">
        <include refid="selectAdminVo"/>
        where id = #{id}
    </select>
    
    <select id="selectAdminByName" parameterType="String" resultMap="MedicalAdminResult">
        <include refid="selectAdminVo"/>
        where name = #{name}
        limit 1
    </select>
    
    <insert id="insertAdmin" parameterType="MedicalAdmin" useGeneratedKeys="true" keyProperty="id">
        insert into project_admin(name, pwd, uid, is_root, create_time)
        values(#{name}, #{pwd}, #{uid}, #{isRoot}, #{createTimeStamp})
    </insert>
    
    <update id="updateAdmin" parameterType="MedicalAdmin">
        update project_admin
        <set>
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="pwd != null and pwd != ''">pwd = #{pwd},</if>
            <if test="uid != null">uid = #{uid},</if>
            <if test="isRoot != null">is_root = #{isRoot},</if>
        </set>
        where id = #{id}
    </update>
    
    <delete id="deleteAdminById" parameterType="Long">
        delete from project_admin where id = #{id}
    </delete>

</mapper>

