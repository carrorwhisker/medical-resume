(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myCur/basicInfo"],{"54b6":function(t,e,n){"use strict";n.r(e);var r=n("6bcf"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=o.a},"5a7c":function(t,e,n){"use strict";n.r(e);var r=n("8cd5"),o=n("54b6");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("e629");var i=n("828b"),c=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"1962b1f8",null,!1,r["a"],void 0);e["default"]=c.exports},"6a09":function(t,e,n){"use strict";(function(t,e){var r=n("47a9");n("1802");r(n("3240"));var o=r(n("5a7c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"6bcf":function(t,e,n){"use strict";(function(t){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("7eb4")),a=r(n("ee10")),i=r(n("7ca3")),c=n("8f59"),s=n("133a");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={data:function(){return{offices:[],showPicker:!1,departmentName:"",form:{img:"",name:"",company:"",position:"",department:"",address:""},showCity:!1,position_:""}},computed:u({},(0,c.mapState)(["cardInfo","userInfo"])),onLoad:function(t){this.form.img=this.cardInfo.img||"",this.form.name=this.cardInfo.name||"",this.form.company=this.cardInfo.company||"",this.form.position=this.cardInfo.position||"",this.form.department=this.cardInfo.department||"",this.position_=this.cardInfo.department||"",this.form.address=this.cardInfo.address||"",this.loadOffices()},methods:{handleSelect:function(t){var e=t.code;t.name;this.position_==e?this.position_="":this.position_=e},handlePosConf:function(){var t=this;this.form.department=this.position_,this.departmentName="",this.offices.forEach((function(e){e.code==t.position_&&(t.departmentName=e.name)})),this.showPicker=!1},handleShowCity:function(){var e=this;t.$emit("selectCity",""),t.$once("selectCity",(function(t){t&&(e.form.city=t[0],e.form.address=t.join("/"))})),t.navigateTo({url:"/pages/city/index?address="+this.form.address})},handleCityConfirm:function(t){console.log(t),this.form.city=t[0],this.form.address=t.join("/"),this.showCity=!1},handleUploadImg:function(){var e=this;return(0,a.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$emit("uploadAvt",""),t.$once("uploadAvt",(function(t){t&&(e.form.img=t.img,e.form.img_yt=t.img_yt)})),t.navigateTo({url:"/pages/myCur/uploadAvt"});case 3:case"end":return n.stop()}}),n)})))()},handleOfficesConfirm:function(t){this.form.department=t.value.code,this.departmentName=t.value.name},handleSave:function(){var e=this;return(0,a.default)(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if((0,s.checkStr)(e.form.name,"nickName")){n.next=3;break}return e.$msg("请输入有效姓名"),n.abrupt("return");case 3:if(e.form.company){n.next=6;break}return e.$msg("请输入单位名称"),n.abrupt("return");case 6:if(e.form.position){n.next=9;break}return e.$msg("请输入职位"),n.abrupt("return");case 9:if(e.form.department){n.next=12;break}return e.$msg("请选择科室"),n.abrupt("return");case 12:if(e.form.address){n.next=15;break}return e.$msg("请选择地址"),n.abrupt("return");case 15:return n.next=17,e.$store.dispatch("saveCardInfo",u(u({},e.cardInfo),e.form));case 17:r=n.sent,r&&(t.showToast({title:"保存成功"}),setTimeout((function(){e.$back()}),500));case 19:case"end":return n.stop()}}),n)})))()},loadOffices:function(){var t=this;return(0,a.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api({url:"departmentList"});case 2:n=e.sent,200==n.code&&(t.offices=n.data,t.form.department&&n.data.forEach((function(e,n){e.code==t.form.department&&(t.position_=e.code,t.departmentName=e.name)})));case 4:case"end":return e.stop()}}),e)})))()},handleChange:function(t){var e=t.detail.value;this.index=e,this.form.department=this.offices[e].code}}};e.default=d}).call(this,n("df3c")["default"])},"8cd5":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={bottomPop:function(){return n.e("components/bottom-pop/bottom-pop").then(n.bind(null,"be88"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showPicker=!0},t.e1=function(e){t.showPicker=!0},t.e2=function(e){t.showPicker=!1})},a=[]},d9c5:function(t,e,n){},e629:function(t,e,n){"use strict";var r=n("d9c5"),o=n.n(r);o.a}},[["6a09","common/runtime","common/vendor"]]]);