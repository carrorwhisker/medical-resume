(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myCur/index"],{"3ca5":function(t,e,n){"use strict";n.r(e);var a=n("a699"),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},"693d":function(t,e,n){"use strict";n.r(e);var a=n("f18e"),r=n("3ca5");for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("9ab3");var s=n("828b"),c=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,"ae396552",null,!1,a["a"],void 0);e["default"]=c.exports},"9ab3":function(t,e,n){"use strict";var a=n("d2c2"),r=n.n(a);r.a},a699:function(t,e,n){"use strict";(function(t,a){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("7eb4")),s=r(n("ee10")),c=r(n("7ca3")),i=n("8f59");n("133a");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,c.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={data:function(){return{showPhone:!1,showEmail:!1,showAddress:!1,showWx:!1,showMenu:!1,phone:"",email:"",address:"",city:"",wechat:"",attachment:"",attachment_name:"",shareInfo:{path:"",title:""},showRename:!1,isFirstFocus:!0,focusTimer:null}},computed:h(h({},(0,i.mapState)(["cardInfo","userInfo"])),{},{cardPlan:function(){var t=this;if(!this.cardInfo.id)return"0%";var e=0;return["img","name","company","position","department","address"].forEach((function(n){t.cardInfo[n]&&e++})),100*(e/6).toFixed(2)+"%"}}),onLoad:function(t){this.phone=this.cardInfo.phone||"",this.email=this.cardInfo.email||"",this.address=this.cardInfo.address||"",this.wechat=this.cardInfo.wechat||"",this.attachment=this.cardInfo.attachment||"",this.attachment_name=this.cardInfo.attachment_name||"",this.cardInfo.name&&this.setShareInfo()},onShow:function(){this.$store.dispatch("getCardList")},onShareAppMessage:function(){return this.shareInfo},onShareTimeline:function(){},methods:{handleFocusSimple:function(t){this.isFirstFocus&&(this.isFirstFocus=!1)},handleBlur:function(t){this.focusTimer&&(clearTimeout(this.focusTimer),this.focusTimer=null)},checkAndAdjustIfNeeded:function(){var e=t.createSelectorQuery().in(this);e.select(".textarea-scroll-area").boundingClientRect(),e.exec((function(e){e[0]&&t.getSystemInfo({success:function(n){var a=n.windowHeight,r=e[0].bottom;if(r>a-50){var o=r-a+80;o>0&&t.pageScrollTo({scrollTop:o,duration:100})}}})}))},handleGoToDescPage:function(){var e=this.cardInfo.content||"";t.navigateTo({url:"/pages/myCur/personalDesc?content=".concat(encodeURIComponent(e))})},handleShowCity:function(){var e=this;t.$emit("selectCity",""),t.$once("selectCity",(function(t){t&&(e.city=t[0],e.address=t.join("/"))})),t.navigateTo({url:"/pages/city/index?address="+this.address})},handleDelFile:function(){var e=this;t.showModal({title:"温馨提示",content:"确认要删除简历附件吗？",success:function(){var t=(0,s.default)(o.default.mark((function t(n){var a,r;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n.confirm,!a){t.next=7;break}return e.showMenu=!1,t.next=5,e.$api({url:"delAttachment",data:{id:e.cardInfo.id}});case 5:r=t.sent,200==r.code&&(e.$msg("操作成功"),e.$store.dispatch("getCardList"),e.attachment="",e.attachment_name="");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},handleRename:function(){this.showMenu=!1,this.showRename=!0},handleSaveJL:function(){var e=this;t.showToast({title:"保存成功！",icon:"success"}),setTimeout((function(){e.$back()}),500)},handleshareFile:function(){var e=this;t.showLoading({title:"请稍等..."}),t.downloadFile({url:this.cardInfo.attachment,success:function(t){e.showMenu=!1,a.shareFileMessage({filePath:t.tempFilePath,fileName:e.cardInfo.attachment_name||"",success:function(){},fail:console.error})},complete:function(){t.hideLoading()}})},setShareInfo:function(){this.cardInfo.name?this.shareInfo={title:this.cardInfo.name+"的简历",path:"/pages/resume/details?id="+this.cardInfo.id}:this.$msg("简历不完整！")},handleUploadPDF:function(){var t=this;return(0,s.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showMenu=!1,e.next=3,t.$uploadFlie();case 3:n=e.sent,200==n.code&&(t.attachment=n.data.url,t.attachment_name=n.data.name,t.saveCardInfo("attachment"));case 5:case"end":return e.stop()}}),e)})))()},saveCardInfo:function(e){var n=this;return(0,s.default)(o.default.mark((function a(){var r,s,c,i,u;return o.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=n[e],r){a.next=4;break}return t.showToast({title:"请输入内容"}),a.abrupt("return");case 4:if("phone"!=e){a.next=9;break}if(s=/^1[3-9][0-9]{9}$/,s.test(r)){a.next=9;break}return t.showToast({title:"请输入有效手机号"}),a.abrupt("return");case 9:if("email"!=e){a.next=15;break}if(c=/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,c.test(r)){a.next=15;break}return t.showToast({title:"请输入有效邮箱"}),a.abrupt("return");case 15:return i=h(h({},n.cardInfo),{},{city:n.city||""}),"attachment"==e?(i.attachment=n.attachment,i.attachment_name=n.attachment_name):i[e]=n[e],a.next=20,n.$store.dispatch("saveCardInfo",i);case 20:if(u=a.sent,!u){a.next=36;break}t.showToast({title:"保存成功",icon:"success"}),a.t0=e,a.next="phone"===a.t0?26:"email"===a.t0?28:"address"===a.t0?30:"wechat"===a.t0?32:"attachment_name"===a.t0?34:35;break;case 26:return n.showPhone=!1,a.abrupt("break",36);case 28:return n.showEmail=!1,a.abrupt("break",36);case 30:return n.showAddress=!1,a.abrupt("break",36);case 32:return n.showWx=!1,a.abrupt("break",36);case 34:n.showRename=!1;case 35:return a.abrupt("break",36);case 36:case"end":return a.stop()}}),a)})))()},toEdit:function(){t.navigateTo({url:"/pages/myCur/basicInfo"})},addWx:function(){t.navigateTo({url:"/pages/myCur/wechat"})},handleRealAuth:function(){1==this.cardInfo.is_authentication?t.navigateTo({url:"/pages/myCur/realAuthed"}):t.navigateTo({url:"/pages/myCur/realAuth"})}}};e.default=f}).call(this,n("df3c")["default"],n("3223")["default"])},c03e:function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("1802");a(n("3240"));var r=a(n("693d"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},d2c2:function(t,e,n){},f18e:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={bottomPop:function(){return n.e("components/bottom-pop/bottom-pop").then(n.bind(null,"be88"))}},r=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showPhone=!0},t.e1=function(e){t.showEmail=!0},t.e2=function(e){t.showAddress=!0},t.e3=function(e){t.showWx=!0},t.e4=function(e){e.stopPropagation(),t.showMenu=!0},t.e5=function(e){t.showMenu=!1})},o=[]}},[["c03e","common/runtime","common/vendor"]]]);